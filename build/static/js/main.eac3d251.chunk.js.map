{"version":3,"sources":["components/Header/index.scss","components/Content/index.scss","components/Header/index.js","components/Content/index.js","index.js"],"names":["module","exports","Header","className","style","header","headerItem","name","main","score","scoreH2","scoreP","this","props","best","tip","tipMessage","span","gameStart","React","Component","Content","onTouchStart","params","setState","pageX","targetTouches","pageY","onTouchEnd","changedTouches","offsetY","state","offsetX","Math","abs","rightMove","leftMove","downMove","upMove","init","list","post","map","number","creat","forEach","item","index","push","length","alert","parseInt","random","console","log","stack","stackResult","baseMove","titem","tindex","sameCheck","floor","reverse","stackChange","tiao","t","time","i","setScore","newValue","color","Map","colors","content","key","get","block","Game","args","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.eac3d251.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerItem\":\"_3q1VSLlFczQ9GzDZzjC8P8\",\"name\":\"_3brI6DMjDEw-YtQHUnq6tf\",\"main\":\"_2TJq3Pyj0HywAKki5eFtT9\",\"score\":\"xoFg8LWH5_4NmSAEHqlJW\",\"best\":\"_3khJaMwBPtWnzu_iS5wJsP\",\"scoreH2\":\"_3bkEeHb3FG-3DykOmxBiC_\",\"scoreP\":\"_2cUGHqYKiv8SxUHuvs-8US\",\"header\":\"_1UDplneKKQ85tHq4fTeozp\",\"tip\":\"FopbLPbsngZMwvqRlmd8a\",\"tipMessage\":\"_2vw5ADrTwa1_37RYP4Ala6\",\"span\":\"_31APgKH4bmYMWxx0O3qIPW\",\"gameStart\":\"_16F3IodSnOlJ0Rjo9TEWB4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"_3RmNNm9ay4hg2WLoi7J8h9\",\"block\":\"_1NyLSs1qOPUGXS7lIb_3Ix\"};","import React from 'react';\r\nimport style from './index.scss';\r\n\r\nclass Header extends React.Component {\r\n  render () {\r\n    return (\r\n      <div className={style.header}>\r\n        <div className={style.headerItem}>\r\n          <h1 className={style.name}>2048</h1>\r\n          <div className={style.main}>\r\n            <div className={style.score}>\r\n              <h2 className={style.scoreH2}>SCORE</h2>\r\n              <p className={style.scoreP}>{this.props.score}</p>\r\n            </div>\r\n            <div className={style.best}>\r\n              <h2 className={style.scoreH2}>BEST</h2>\r\n              <p className={style.scoreP}>0</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={style.tip}>\r\n          <p className={style.tipMessage}>\r\n            Join the numbers and get to the <span className={style.span}>2048 title!</span>\r\n          </p>\r\n          <div className={style.gameStart}>\r\n            New Game\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header\r\n\r\n","import React from 'react';\r\nimport style from './index.scss';\r\nimport colors from './colors.json';\r\n\r\nclass Content extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pageX: 0,\r\n      pageY: 0,\r\n      post: [\r\n        { number: 2 }, { number: 2 }, { number: 0 }, { number: 0 },\r\n        { number: 4 }, { number: 0 }, { number: 0 }, { number: 0 },\r\n        { number: 4 }, { number: 2 }, { number: 32 }, { number: 0 },\r\n        { number: 8 }, { number: 16 }, { number: 0 }, { number: 0 },\r\n      ],\r\n      score: 0\r\n    }\r\n  }\r\n\r\n  onTouchStart = (params) => {\r\n    // console.log('onTouchStart', params.targetTouches[0].pageX);\r\n    this.setState({\r\n      pageX: params.targetTouches[0].pageX,\r\n      pageY: params.targetTouches[0].pageY\r\n    });\r\n  }\r\n\r\n  onTouchEnd = (params) => {\r\n    // console.log('onTouchEnd', params.changedTouches[0].pageX);\r\n    let { pageX, pageY } = params.changedTouches[0]\r\n    let offsetY = pageY - this.state.pageY,\r\n      offsetX = pageX - this.state.pageX\r\n    let offset = Math.abs(offsetX) - Math.abs(offsetY)\r\n    if (offset > 0)\r\n      offsetX > 0 ? this.rightMove() : this.leftMove()\r\n    else offsetY > 0 ? this.downMove() : this.upMove()\r\n    // this.creat()\r\n    // this.leftMove()\r\n    // console.log('onTouchEnd', params);\r\n  }\r\n  init = () => {\r\n    let list = this.state.post.map(() => {\r\n      return { number: 0 }\r\n    })\r\n    this.setState({\r\n      post: list\r\n    }, () => {\r\n      this.creat()\r\n    });\r\n\r\n  }\r\n  creat = () => {\r\n    let post = [...this.state.post]\r\n    var list = []\r\n    // let score = 0\r\n    this.state.post.forEach((item, index) => {\r\n      // if (item.number > 2) score += item.number\r\n      if (item.number === 0) list.push(index)\r\n    })\r\n    // this.props.setScore(score)\r\n    if (list.length === 0) {\r\n      alert(\"游戏结束\")\r\n      this.init()\r\n      return\r\n    }\r\n\r\n    let index = parseInt(Math.random() * (list.length), 10);\r\n    // console.log(index);\r\n    post[list[index]] = {\r\n      number: 2\r\n    }\r\n    console.log(index, list, list[index]);\r\n    this.setState({\r\n      // score: score,\r\n      post: post\r\n    });\r\n    // console.log(list, parseInt(Math.random() * (this.state.post.length + 1), 10));\r\n  }\r\n  downMove = () => {\r\n    let stack = [[], [], [], []]\r\n    let stackResult = []\r\n    this.state.post.forEach((item, index) => {\r\n      if (item.number === 0) return\r\n      stack[index % 4].push(item)\r\n    })\r\n    let stackChange = this.baseMove(stack, true)\r\n\r\n    stackChange.forEach((item, index) => {\r\n      item.forEach((titem, tindex) => {\r\n        stackResult[index + tindex * 4] = titem\r\n      })\r\n    })\r\n\r\n    // console.log(stack);\r\n    //   console.log(stackChange);\r\n    //   console.log(stackResult);\r\n    if (this.sameCheck(stackResult)) return\r\n\r\n    this.setState({\r\n      post: stackResult\r\n    }, () => {\r\n      this.creat()\r\n    });\r\n  }\r\n  upMove = () => {\r\n    let stack = [[], [], [], []]\r\n    let stackResult = []\r\n    this.state.post.forEach((item, index) => {\r\n      if (item.number === 0) return\r\n      stack[index % 4].push(item)\r\n    })\r\n    let stackChange = this.baseMove(stack)\r\n\r\n    stackChange.forEach((item, index) => {\r\n      item.forEach((titem, tindex) => {\r\n        stackResult[index + tindex * 4] = titem\r\n      })\r\n    })\r\n\r\n    // console.log(stack);\r\n    //   console.log(stackChange);\r\n    //   console.log(stackResult);\r\n    if (this.sameCheck(stackResult)) return\r\n\r\n    this.setState({\r\n      post: stackResult\r\n    }, () => {\r\n      this.creat()\r\n    });\r\n  }\r\n  rightMove = () => {\r\n    let stack = [[], [], [], []]\r\n    let stackResult = []\r\n    this.state.post.forEach((item, index) => {\r\n      if (item.number === 0) return\r\n      stack[Math.floor(index / 4)].push(item)\r\n    })\r\n\r\n    let stackChange = this.baseMove(stack, true)\r\n    stackChange.forEach((item, index) => {\r\n      item.forEach((titem, tindex) => {\r\n        stackResult.push(titem)\r\n      })\r\n    })\r\n\r\n    // console.log(stack);\r\n    //   console.log(stackChange);\r\n    //   console.log(stackResult);\r\n    if (this.sameCheck(stackResult)) return\r\n\r\n    this.setState({\r\n      post: stackResult\r\n    }, () => {\r\n      this.creat()\r\n    });\r\n  }\r\n  leftMove = () => {\r\n    let stack = [[], [], [], []]\r\n    let stackResult = []\r\n    this.state.post.forEach((item, index) => {\r\n      if (item.number === 0) return\r\n      stack[Math.floor(index / 4)].push(item)\r\n    })\r\n    let stackChange = this.baseMove(stack)\r\n\r\n    stackChange.forEach((item, index) => {\r\n      item.forEach((titem, tindex) => {\r\n        stackResult.push(titem)\r\n      })\r\n    })\r\n\r\n    // console.log(stack);\r\n    //   console.log(stackChange);\r\n    //   console.log(stackResult);\r\n    if (this.sameCheck(stackResult)) return\r\n    this.setState({\r\n      post: stackResult\r\n    }, () => {\r\n      this.creat()\r\n    });\r\n  }\r\n  baseMove = (stack, reverse = false) => {\r\n    let stackChange = [[], [], [], []]\r\n    let score = this.state.score\r\n    if (reverse) stack.forEach(item => item.reverse())\r\n\r\n    stack.forEach((item, index) => {\r\n      if (item.length >= 2) {\r\n        let list = [...item]\r\n        var tiao = false;\r\n        for (var t = 0; t < item.length; t++) {\r\n          if (!tiao) {\r\n            if (t === item.length - 1) {\r\n              stackChange[index].push(list[t])\r\n              break\r\n            }\r\n            if (list[t].number === list[t + 1].number) {\r\n              stackChange[index].push({\r\n                number: list[t].number * 2\r\n              })\r\n              score += list[t].number * 2\r\n              tiao = true\r\n            } else {\r\n              stackChange[index].push(list[t])\r\n            }\r\n\r\n          } else {\r\n            tiao = false\r\n          }\r\n        }\r\n      } else {\r\n        stackChange[index] = item\r\n      }\r\n      // console.log('11111', stackChange[index]);\r\n      // stackChange[index].reverse()\r\n      let time = 4 - stackChange[index].length\r\n      for (let i = 0; i < time; i++) {\r\n        stackChange[index].push({\r\n          number: 0\r\n        })\r\n      }\r\n      if (reverse) stackChange[index].reverse()\r\n    })\r\n\r\n\r\n    this.setState({\r\n      score: score\r\n    }, () => {\r\n      this.props.setScore(this.state.score)\r\n    });\r\n    return stackChange\r\n  }\r\n  /**\r\n   * @description: 相同检查\r\n   * @param {type} \r\n   */\r\n  sameCheck = (newValue) => {\r\n    console.log(newValue, this.state.post);\r\n    for (var i = 0; i < newValue.length; i++) {\r\n      if (newValue[i].number !== this.state.post[i].number) return false\r\n    }\r\n    return true\r\n  }\r\n\r\n\r\n  render () {\r\n    const color = new Map(colors)\r\n    return (\r\n      <div\r\n        onTouchStart={this.onTouchStart}\r\n        onTouchEnd={this.onTouchEnd}\r\n        className={style.content}>\r\n        {\r\n          this.state.post.map((item, index) => {\r\n            return <div key={index} style={color.get(item.number)} className={style.block} >{item.number ? item.number : ''}</div>\r\n          })\r\n        }\r\n      </div >\r\n    );\r\n  }\r\n}\r\n\r\nexport default Content\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport \"lib-flexible\"\r\nimport Header from './components/Header';\r\nimport Content from './components/Content';\r\n\r\nclass Game extends React.Component {\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.state = {\r\n      score: 0,\r\n    };\r\n  }\r\n  setScore = (score) => {\r\n    console.log('分数：', score);\r\n    this.setState({\r\n      score: score,\r\n    });\r\n  }\r\n  render () {\r\n    return (\r\n      <div className=\"game\">\r\n        <Header score={this.state.score} />\r\n        <Content setScore={this.setScore} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// ========================================\r\n\r\nReactDOM.render(\r\n  <Game />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}